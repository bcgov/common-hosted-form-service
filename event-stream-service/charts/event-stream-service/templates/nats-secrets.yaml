{{- $secretName := (.Values.ess.nats.secret.name) }}
{{- $adminPwdValue := randAlphaNum 32 | b64enc }}
{{- $anonymousPwdValue := randAlphaNum 32 | b64enc }}
{{- $chefsPwdValue := randAlphaNum 32 | b64enc }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ $secretName }}
  namespace: {{ include "common.names.namespace" . | quote }}
  labels: {{- include "common.labels.standard" ( dict "customLabels" .Values.commonLabels "context" $ ) | nindent 4 }}
  {{- if .Values.commonAnnotations }}
  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
  {{- end }}
data:
  admin_pwd: {{ include "common.secrets.lookup" (dict "secret" $secretName "key" "admin_pwd" "defaultValue" $adminPwdValue "context" $) }}
  anonymous_pwd: {{ include "common.secrets.lookup" (dict "secret" $secretName "key" "anonymous_pwd" "defaultValue" $anonymousPwdValue "context" $) }}
  chefs_pwd: {{ include "common.secrets.lookup" (dict "secret" $secretName "key" "chefs_pwd" "defaultValue" $chefsPwdValue "context" $) }}
  